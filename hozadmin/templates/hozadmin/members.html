<!doctype html>
<html class="no-js" lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Hoztox Dashboard </title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">  
  {% load static %}
    <link rel="stylesheet" href="{% static 'assets/css/my-task.style.min.css' %}">
</head>
<body  data-mytask="theme-indigo">

<div id="mytask-layout">

   
    <div class="sidebar px-4 py-4 py-md-5 me-0">
        <div class="d-flex flex-column h-100">
            <a href=" " class="mb-0 brand-icon hoztox-logo">               
                    <img src="{% static 'assets/images/hoztox-logo.svg' %}">             
            </a>
            <!-- Menu: main ul -->

            <ul class="menu-list flex-grow-1 mt-3">             
                <li><a class="m-link" href=" "><i class="icofont-home fs-5"></i> <span>Dashboard</span></a></li>
                <li  class="collapsed">
                    <a class="m-link"  data-bs-toggle="collapse" data-bs-target="#project-Components" href="#">
                        <i class="icofont-briefcase"></i><span>Projects</span> <span class="arrow icofont-dotted-down ms-auto text-end fs-5"></span></a>
                    <!-- Menu: Sub menu ul -->
                    <ul class="sub-menu collapse" id="project-Components">
                        <li><a class="ms-link" href="{% url 'project_list' %}"><span>Projects</span></a></li>
                        <li><a class="ms-link" href="{% url 'tasks' %}"><span>Tasks</span></a></li>
                     
                    </ul>
                </li>               
                <li class="collapsed">
                    <a class="m-link" data-bs-toggle="collapse" data-bs-target="#client-Components" href="#"><i
                            class="icofont-user-male"></i> <span>Our Clients</span> <span class="arrow icofont-dotted-down ms-auto text-end fs-5"></span></a>
                    <!-- Menu: Sub menu ul -->
                    <ul class="sub-menu collapse" id="client-Components">
                        <li><a class="ms-link" href="{% url 'clients' %}"> <span>Clients</span></a></li>
                        
                    </ul>
                </li>
                <li class="collapsed">
                    <a class="m-link" data-bs-toggle="collapse" data-bs-target="#emp-Components" href="#"><i
                            class="icofont-users-alt-5"></i> <span>Employees</span> <span class="arrow icofont-dotted-down ms-auto text-end fs-5"></span></a>
                    <!-- Menu: Sub menu ul -->
                    <ul class="sub-menu collapse" id="emp-Components">
                        <li><a class="ms-link" href="{% url 'employee_list' %}"> <span>Members</span></a></li>
                                         
                    </ul>
                </li>             
            </ul>           
            <!-- Menu: menu collepce btn -->
            <button type="button" class="btn btn-link sidebar-mini-btn text-light">
                <span class="ms-2"><i class="icofont-bubble-right"></i></span>
            </button>
        </div>
    </div>

    <!-- main body area -->
    <div class="main px-lg-4 px-md-4">

        <!-- Body: Header -->
        <div class="header">
            <nav class="navbar py-4">
                <div class="container-xxl">    
                    <!-- header rightbar icon -->
                    <div class="h-right d-flex align-items-center mr-5 mr-lg-0 order-1">                      
                        <div class="dropdown user-profile ml-2 ml-sm-3 d-flex align-items-center">
                            <div class="u-info me-2">
                                <p class="mb-0 text-end line-height-sm "><span class="font-weight-bold">Rasheed</span></p>
                                <small>Admin Profile</small>
                            </div>
                            <a class="nav-link dropdown-toggle pulse p-0" href="#" role="button" data-bs-toggle="dropdown" data-bs-display="static">
                                <img class="avatar lg rounded-circle img-thumbnail" src="{% static 'assets/images/Rasheed-12.webp' %}" alt="profile">
                            </a>
                            <div class="dropdown-menu rounded-lg shadow border-0 dropdown-animation dropdown-menu-end p-0 m-0">
                                <div class="card border-0 w280">
                                    <div class="card-body pb-0">
                                        <div class="d-flex py-1">
                                            <img class="avatar rounded-circle" src="{% static 'assets/images/profile_av.png' %}" alt="profile">
                                            <div class="flex-fill ms-3">
                                                <p class="mb-0"><span class="font-weight-bold">Dylan Hunter</span></p>
                                                <small class="">Dylan.hunter@gmail.com</small>
                                            </div>
                                        </div>
                                        
                                        <div><hr class="dropdown-divider border-dark"></div>
                                    </div>
                                    <div class="list-group m-2 ">
                                        <a href="task.html" class="list-group-item list-group-item-action border-0 "><i class="icofont-tasks fs-5 me-3"></i>My Task</a>
                                        <a href="members.html" class="list-group-item list-group-item-action border-0 "><i class="icofont-ui-user-group fs-6 me-3"></i>members</a>
                                        <a href="ui-elements/auth-signin.html" class="list-group-item list-group-item-action border-0 "><i class="icofont-logout fs-6 me-3"></i>Signout</a>
                                        <div><hr class="dropdown-divider border-dark"></div>
                                        <a href="ui-elements/auth-signup.html" class="list-group-item list-group-item-action border-0 "><i class="icofont-contact-add fs-5 me-3"></i>Add personal account</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="px-md-1">
                            <a href="#offcanvas_setting" data-bs-toggle="offcanvas" aria-expanded="false" title="template setting">
                                <svg class="svg-stroke" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"></path>
                                    <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
    
                    <!-- menu toggler -->
                    <button class="navbar-toggler p-0 border-0 menu-toggle order-3" type="button" data-bs-toggle="collapse" data-bs-target="#mainHeader">
                        <span class="fa fa-bars"></span>
                    </button>
    
                    <!-- main menu Search-->
                    <div class="order-0 col-lg-4 col-md-4 col-sm-12 col-12 mb-3 mb-md-0 ">
                        <div class="input-group flex-nowrap input-group-lg">
                            <button type="button" class="input-group-text" id="addon-wrapping"><i class="fa fa-search"></i></button>
                            <input type="search" class="form-control" placeholder="Search" aria-label="search" aria-describedby="addon-wrapping">
                            <button type="button" class="input-group-text add-member-top" id="addon-wrappingone" data-bs-toggle="modal" data-bs-target="#addUser"><i class="fa fa-plus"></i></button>
                        </div>
                    </div>
    
                </div>
            </nav>
        </div>
         <!-- Body: Header -->

        <!-- Body: Body -->
        <div class="body d-flex py-lg-3 py-md-2">
            <div class="container-xxl">
                <div class="row clearfix">
                    <div class="col-md-12">
                        <div class="card border-0 mb-4 no-bg">
                            <div class="card-header py-3 px-0 d-sm-flex align-items-center  justify-content-between border-bottom">
                                <h3 class=" fw-bold flex-fill mb-0 mt-sm-0">Employee</h3>
                                <button type="button" class="btn btn-dark me-1 mt-1 w-sm-100" data-bs-toggle="modal" data-bs-target="#createemp"><i class="icofont-plus-circle me-2 fs-6"></i>Add Employee</button>
                               
                            </div>
                        </div>
                    </div>
                </div><!-- Row End -->
                <div class="row g-3 row-cols-1 row-cols-sm-1 row-cols-md-1 row-cols-lg-2 row-cols-xl-2 row-cols-xxl-2 row-deck py-1 pb-4">
                    {% for employee in employees %}
                    <div class="col">
                        <div class="card teacher-card">
                            <div class="card-body d-flex">
                                <div class="profile-av pe-xl-4 pe-md-2 pe-sm-4 pe-4 text-center w220">
                                    {% if employee.logo %}
                                        <img src="{{ employee.logo.url }}" alt="" class="avatar xl rounded-circle img-thumbnail shadow-sm">
                                    {% else %}
                                        <img src="{% static 'assets/images/members/default.jpg' %}" alt="" class="avatar xl rounded-circle img-thumbnail shadow-sm">
                                    {% endif %}
                                </div>
                                <div class="teacher-info border-start ps-xl-4 ps-md-3 ps-sm-4 ps-4 w-100">
                                    <h6 class="mb-0 mt-2 fw-bold d-block fs-6">{{ employee.name }}</h6>
                                    <span class="light-info-bg py-1 px-2 rounded-1 d-inline-block fw-bold small-11 mb-0 mt-1">{{ employee.designation }}</span>
                                    <div class="mt-3 pt-3 border-top"></div>
                                    <a href="#" class="btn btn-dark btn-sm mt-1">
                                        <i class="icofont-plus-circle me-2 fs-6"></i>Add Task
                                    </a>
                                    <a href="{% url 'employee_profile' employee.id %}" class="btn btn-dark btn-sm mt-1">
                                        <i class="icofont-invisible me-2 fs-6"></i>Profile
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-5">
                        <h4>No employees found</h4>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
            </div>
        </div>
        
 
      

        <!-- Create Employee-->
        <div class="modal fade" id="createemp" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
                <style>
                    .modal-dialog-scrollable .modal-body {
                        max-height: 65vh;
                        overflow-y: auto;
                    }
                    .modal-footer {
                        position: sticky;
                        bottom: 0;
                        background-color: white;
                        z-index: 1;
                    }
                </style>
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title fw-bold" id="createprojectlLabel">Add Employee</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form id="employeeForm" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="modal-body">
                            <div id="form-errors" class="alert alert-danger d-none"></div>
                            
                            <div class="col mb-3">
                                <label for="id_logo" class="form-label">Image</label>
                                <input type="file" name="logo" class="form-control" id="id_logo">
                            </div>
                            
                            <div class="mb-3">
                                <label for="id_name" class="form-label">Employee Name</label>
                                <input type="text" name="name" class="form-control" id="id_name" placeholder="Employee Name">
                            </div>
                            
                            <div class="deadline-form">
                                <div class="row g-3 mb-3">
                                    <div class="col-sm-6">
                                        <label for="id_employee_id" class="form-label">Employee ID</label>
                                        <input type="text" name="employee_id" class="form-control" id="id_employee_id" placeholder="Employee ID">
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="id_join_date" class="form-label">Joining Date</label>
                                        <input type="date" name="join_date" class="form-control" id="id_join_date">
                                    </div>
                                </div>
                                
                                <div class="row g-3 mb-3">
                                    <div class="col">
                                        <label for="id_username" class="form-label">User Name</label>
                                        <input type="text" name="username" class="form-control" id="id_username" placeholder="Username">
                                    </div>
                                    <div class="col">
                                        <label for="id_password" class="form-label">Password</label>
                                        <input type="password" name="password" class="form-control" id="id_password" placeholder="Password">
                                    </div>
                                </div>
                                
                                <div class="row g-3 mb-3">
                                    <div class="col">
                                        <label for="id_email" class="form-label">Email ID</label>
                                        <input type="email" name="email" class="form-control" id="id_email" placeholder="Email">
                                    </div>
                                    <div class="col">
                                        <label for="id_phone" class="form-label">Phone</label>
                                        <input type="text" name="phone" class="form-control" id="id_phone" placeholder="Phone">
                                    </div>
                                </div>
                                
                                <div class="row g-3 mb-3">
                                    <div class="col">
                                        <label for="id_department" class="form-label">Department</label>
                                        <select name="department" class="form-select" id="id_department">
                                            <option value="IT Management">IT Management</option>
                                            <option value="Marketing">Marketing</option>
                                        </select>
                                        
                                      
                                    </div>
                                    <div class="col">
                                        <label for="id_designation" class="form-label">Designation</label>
                                        <select name="designation" class="form-select" id="id_designation">
                                            <option value="UI/UX Design">UI/UX Design</option>
                                            <option value="Website Design">Website Design</option>
                                            <option value="Web App Development">Web App Development</option>
                                            <option value="SEO">SEO</option>
                                            <option value="Social Media">Social Media</option>
                                            <option value="Backend Development">Backend Development</option>
                                            <option value="Digital Marketing">Digital Marketing</option>
                                            <option value="Other">Other</option>                                          
                                             
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="id_address" class="form-label">Address</label>
                                <textarea name="address" class="form-control" id="id_address" rows="3" placeholder="Add Address of the employee"></textarea>
                            </div>

                         
                            
                            <div class="mb-3">
                                <label for="id_description" class="form-label">Description (optional)</label>
                                <textarea name="description" class="form-control" id="id_description" rows="3" placeholder="Add any extra details about the employee"></textarea>
                            </div>
                            
                            <h4>Personal Information</h4>
                            <div class="row g-3 mb-3">
                                <div class="col">
                                    <label for="id_nationality" class="form-label">Nationality</label>
                                    <input type="text" name="nationality" class="form-control" id="id_nationality" placeholder="Nationality">
                                </div>
                                <div class="col">
                                    <label for="id_religion" class="form-label">Religion</label>
                                    <input type="text" name="religion" class="form-control" id="id_religion" placeholder="Religion">
                                </div>
                            </div>
                            
                            <div class="row g-3 mb-3">
                                <div class="col">
                                    <label for="id_marital_status" class="form-label">Marital Status</label>
                                    <input type="text" name="marital_status" class="form-control" id="id_marital_status" placeholder="Marital Status">
                                </div>
                                <div class="col">
                                    <label for="id_emergency_contact" class="form-label">Emergency Contact</label>
                                    <input type="text" name="emergency_contact" class="form-control" id="id_emergency_contact" placeholder="Emergency Contact">
                                </div>
                            </div>
                            
                            <h4>Bank Information</h4>
                            <div class="row g-3 mb-3">
                                <div class="col">
                                    <label for="id_bank_name" class="form-label">Bank Name</label>
                                    <input type="text" name="bank_name" class="form-control" id="id_bank_name" placeholder="Bank Name">
                                </div>
                                <div class="col">
                                    <label for="id_acc_no" class="form-label">Account No.</label>
                                    <input type="text" name="acc_no" class="form-control" id="id_acc_no" placeholder="Account Number">
                                </div>
                            </div>
                            
                            <div class="row g-3 mb-3">
                                <div class="col">
                                    <label for="id_ifsc" class="form-label">IFSC Code</label>
                                    <input type="text" name="ifsc" class="form-control" id="id_ifsc" placeholder="IFSC Code">
                                </div>
                                <div class="col">
                                    <label for="id_pan" class="form-label">Pan No</label>
                                    <input type="text" name="pan" class="form-control" id="id_pan" placeholder="PAN Number">
                                </div>
                            </div>
                            
                            <div class="row g-3 mb-3">
                                <div class="col">
                                    <label for="id_upi_id" class="form-label">UPI Id</label>
                                    <input type="text" name="upi_id" class="form-control" id="id_upi_id" placeholder="UPI ID">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Create</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- start: template setting, and more. -->
	<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvas_setting" aria-labelledby="offcanvas_setting">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title">Template Setting</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body d-flex flex-column">
			<div class="mb-4">
				<h6>Set Theme Color</h6>
				<ul class="choose-skin list-unstyled mb-0">
					<li data-theme="ValenciaRed"><div style="--mytask-theme-color: #D63B38;"></div></li>
					<li data-theme="SunOrange"><div style="--mytask-theme-color: #F7A614;"></div></li>
					<li data-theme="AppleGreen"><div style="--mytask-theme-color: #5BC43A;"></div></li>
					<li data-theme="CeruleanBlue"><div style="--mytask-theme-color: #00B8D6;"></div></li>
					<li data-theme="Mariner"><div style="--mytask-theme-color: #0066FE;"></div></li>
					<li data-theme="PurpleHeart" class="active"><div style="--mytask-theme-color: #6238B3;"></div></li>
					<li data-theme="FrenchRose"><div style="--mytask-theme-color: #EB5393;"></div></li>
				</ul>
			</div>
            <div class="mb-4 flex-grow-1">
				<h6>Set Theme Light/Dark/RTL</h6>
				<!-- Theme: Switch Theme -->
                <ul class="list-unstyled mb-0">
                    <li>
                        <div class="form-check form-switch theme-switch">
                            <input class="form-check-input fs-6" type="checkbox" role="switch" id="theme-switch">
                            <label class="form-check-label mx-2" for="theme-switch">Enable Dark Mode!</label>
                        </div>
                    </li>
                    <li>
                        <div class="form-check form-switch theme-rtl">
                            <input class="form-check-input fs-6" type="checkbox" role="switch" id="theme-rtl">
                            <label class="form-check-label mx-2" for="theme-rtl">Enable RTL Mode!</label>
                        </div>
                    </li>
                    <li>
                        <div class="form-check form-switch monochrome-toggle">
                            <input class="form-check-input fs-6" type="checkbox" role="switch" id="monochrome">
                            <label class="form-check-label mx-2" for="monochrome">Monochrome Mode</label>
                        </div>
                    </li>
                </ul>
			</div>
			<div class="d-flex">
				<a href="https://themeforest.net/item/mytask-hr-project-management-admin-template/31974551" class="btn w-100 me-1 py-2 btn-primary">Buy Now</a>
				<a href="https://themeforest.net/user/pixelwibes/portfolio" class="btn w-100 ms-1 py-2 btn-dark">View Portfolio</a>
			</div>
		</div>
	</div>
</div>

<!-- Jquery Core Js -->
<script src="{% static 'assets/bundles/libscripts.bundle.js' %}"></script>
<script>
    $(document).ready(function() {
        $('#employeeForm').on('submit', function(e) {
            e.preventDefault();
            console.log("Form submitted");
            
            var formData = new FormData(this);
            
            $.ajax({
                url: '{% url "create_employee" %}',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    console.log("Response:", response);
                    if (response.success) {
                        location.reload();
                    } else {
                        $('#form-errors').html(response.html).removeClass('d-none');
                    }
                },
                error: function(xhr, status, error) {
                    console.error("Error:", error);
                    $('#form-errors').html('An error occurred.').removeClass('d-none');
                }
            });
        });
    });
    </script>

<!-- Jquery Page Js -->
<script src="../js/template.js"></script>
</body>
</html>